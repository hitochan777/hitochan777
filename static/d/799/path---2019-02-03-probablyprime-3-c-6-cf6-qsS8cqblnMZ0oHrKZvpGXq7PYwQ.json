{"data":{"markdownRemark":{"html":"<p>Golang での素数判定には<code class=\"language-text\">math/big</code>の<a href=\"https://golang.org/pkg/math/big/#Int.ProbablyPrime\"><code class=\"language-text\">ProbablyPrime</code></a>が使える。</p>\n<p>メソッドのシグネチャは <code class=\"language-text\">func (x *Int) ProbablyPrime(n int) bool</code>。\nこのメソッドは疑似ランダムで選ばれた<code class=\"language-text\">n</code>個の数字を用いて<code class=\"language-text\">x</code>が(おそらく)素数かどうか判定する。\n<code class=\"language-text\">x</code>が素数なら必ず<code class=\"language-text\">true</code>を返し、<code class=\"language-text\">x</code>がランダムに選ばれた素数でない数字なら<strong>おそらく</strong><code class=\"language-text\">false</code>を返す。\nfalse-positive (素数でないのに誤って素数と判定してしまう)確率は最大で<span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><mo>(</mo><mfrac><mn>1</mn><mn>4</mn></mfrac><msup><mo>)</mo><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">(\\frac{1}{4})^{n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.190108em;vertical-align:-0.345em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.845108em;\"><span style=\"top:-2.6550000000000002em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">4</span></span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.394em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.345em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathdefault mtight\">n</span></span></span></span></span></span></span></span></span></span></span></span>。</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math><semantics><mrow><msup><mn>2</mn><mn>64</mn></msup></mrow><annotation encoding=\"application/x-tex\">2^{64}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8141079999999999em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">6</span><span class=\"mord mtight\">4</span></span></span></span></span></span></span></span></span></span></span></span>よりも小さい数字なら返り値は 100%正しい。</p>\n<div class=\"gatsby-highlight\" data-language=\"golang:main.go\"><pre class=\"language-golang:main.go\"><code class=\"language-golang:main.go\">package main\n\nimport (\n\t&quot;fmt&quot;\n\t&quot;math/big&quot;\n)\n\nfunc main() {\n\tvar prime, nonPrime big.Int\n\tprime.SetString(&quot;20988936657440586486151264256610222593863921&quot;, 10)\n\tnonPrime.SetString(&quot;20988936657440586486151264256610222593863922&quot;, 10)\n\tfmt.Println(prime.ProbablyPrime(0)) // 素数の場合\n\tfmt.Println(nonPrime.ProbablyPrime(0)) // 素数じゃない場合\n}</code></pre></div>\n<p>実行結果</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ go run main.go\n<span class=\"token boolean\">true</span>\n<span class=\"token boolean\">false</span></code></pre></div>","frontmatter":{"title":"ProbablyPrimeを使ってgolangで素数判定","date":"2019-02-03T00:00:00.000Z"},"timeToRead":1}},"pageContext":{"slug":"/2019/02/03/probablyprime/"}}