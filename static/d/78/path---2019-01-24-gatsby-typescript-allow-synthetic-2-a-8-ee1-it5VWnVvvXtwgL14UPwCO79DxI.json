{"data":{"markdownRemark":{"html":"<p><a href=\"https://www.gatsbyjs.org/packages/gatsby-plugin-typescript/\">gatsby-plugins-typescript</a>で GatsbyJS を typescript で使えるようしていた。\nで今日、typescript だから VSCode を使うみたいな状況を避けたかったので、<a href=\"https://github.com/Quramy/tsuquyomi\">tsuquyomi</a>という便利な Vim の typescript プラグインを入れてみた。</p>\n<p>すると、以下のようなエラーで怒られた。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">src/templates/blog-post.tsx:1:8 - error TS1192: Module &#39;&quot;/home/hitochan/developer/me/node_modules/@types/react/index&quot;&#39; has no default export.\n\n1 import React from &#39;react&#39;</code></pre></div>\n<p>エラーが言っていることは文字通りで、react には <code class=\"language-text\">default export</code> がないのにそれを <code class=\"language-text\">import</code> しようとしてるよ！というエラーだ。</p>\n<p>具体的には以下のコード。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">import React from &#39;react&#39;</code></pre></div>\n<p>なんで今更こんなエラーが出るようになったかというと、\ngatsby-plugins-typescript は型チェックなどはせずに js にトランスパイルするだけなので気づかなかっただけ。</p>\n<p>解決策は 2 つ。<code class=\"language-text\">tsconfig.json</code>追加すれば他のファイルの変更はいらないので今回は 2 にした。\nちなみに<code class=\"language-text\">gatsby-plugins-typescript</code>は<code class=\"language-text\">tsconfig.json</code>に全く影響されないっぽいので、設定は gatsby-config.js でやる必要がある。</p>\n<ol>\n<li><code class=\"language-text\">import * as React from &#39;react&#39;</code></li>\n<li><code class=\"language-text\">tsconfig.json</code>の<code class=\"language-text\">compileOptions</code>に以下のように<code class=\"language-text\">&quot;esModuleInterop&quot;: true</code>を設定。</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    ...\n    <span class=\"token property\">\"esModuleInterop\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    ...\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  ...\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"typescriptのvim pluginとgatsby-plugins-typescriptを一緒に使う","date":"2019-01-24T00:00:00.000Z"},"timeToRead":1}},"pageContext":{"slug":"/2019/01/24/gatsby-typescript-allow-synthetic/"}}